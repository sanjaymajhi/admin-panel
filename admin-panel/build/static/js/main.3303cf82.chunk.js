(this["webpackJsonpadmin-panel-client"]=this["webpackJsonpadmin-panel-client"]||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},30:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),o=a.n(l),i=(a(30),a(2)),s=a(3),c=a(4),u=a(5),m=a(9),d=a(11),p=a(16),h=a(13),v=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(h.a)({},t,a))},n.login_form_submit=function(e){e.preventDefault();var t=document.querySelector(".overlay");t.style.display="block",fetch("/api/login/",{method:"POST",body:JSON.stringify(Object(p.a)({},n.state)),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){if("success"===e.saved)localStorage.setItem("token",e.token),n.setLastActive(),n.props.loginNavHandler(!0),e.admin?n.props.history.push("/admin/user_list"):n.props.history.push("/user/profile");else{t.style.display="none";var a=document.getElementById("errors");if(a.style.display="block",e.error&&(a.innerHTML+=e.error.msg),e.errors){var r=1;e.errors.map((function(e){a.innerHTML+="<p>"+r+". "+e.msg+"<br/></p>",r++}))}window.location.hash="errors",setTimeout((function(){a.style.display="none"}),1e4)}}))},n.setLastActive=function(){fetch("/api/active",{method:"POST",body:JSON.stringify({token:localStorage.getItem("token")}),headers:{"content-type":"application/json"}}).then()},n.state={email:"",password:""},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("form",{id:"login_form",onSubmit:this.login_form_submit},r.a.createElement("h1",null,"Login Form"),r.a.createElement("label",{htmlFor:"email"},"Email ID : "),r.a.createElement("input",{id:"email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password : "),r.a.createElement("input",{id:"password",name:"password",type:"text",value:this.state.password,onChange:this.handleChange}),r.a.createElement("div",null),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement("div",{id:"errors",style:{display:"none"}},r.a.createElement("strong",null,"Errors :")," "),r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"circular-loader",style:{position:"absolute",top:"45vh",left:"45vw"}}),r.a.createElement("p",{style:{position:"absolute",top:"60vh",left:"43vw"}},"Verifying Credentials...")))}}]),a}(n.Component),f=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).logout=function(t){localStorage.removeItem("token"),e.props.history.push({path:"/"})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"nav"},r.a.createElement(m.b,{className:"nav-left",to:"/"},r.a.createElement("p",null,"Website")),this.props.loggedin?r.a.createElement("ul",{id:"navdiv2"},r.a.createElement("li",null,r.a.createElement("a",{href:"/",onClick:this.logout},"Log Out"))):r.a.createElement("ul",{id:"navdiv1"},r.a.createElement(m.b,{to:"/login"},r.a.createElement("li",null,"Login")))))}}]),a}(n.Component),E=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"a_nav"},r.a.createElement("h2",null,"Menu"),r.a.createElement(m.b,{to:"/admin/user_list"},r.a.createElement("p",null,r.a.createElement("i",{className:"material-icons"}," format_list_bulleted")," User List"," ")),r.a.createElement(m.b,{to:"/admin/addUser"},r.a.createElement("p",null,r.a.createElement("i",{className:"material-icons"},"add_box"),"Add User"," ")))}}]),a}(n.Component),y=a(10),b=a.n(y),g=a(14),O=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).fetchUserList=function(){var e=document.querySelector(".overlay");e.style.display="block",fetch("/api/list/",{method:"POST",body:JSON.stringify({token:localStorage.getItem("token")}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then(function(){var t=Object(g.a)(b.a.mark((function t(a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("unsuccessful"!==a.saved){t.next=7;break}(r=document.getElementById("errors")).innerHTML+=a.error.msg,window.location.hash="errors",setTimeout((function(){r.style.display="none",r.innerHTML="Errors : "}),1e4),t.next=9;break;case 7:return t.next=9,n.setState({users:a});case 9:e.style.display="none";case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},n.disableHandler=function(e){e.preventDefault();var t=e.target.id;fetch("/api/disable",{method:"POST",body:JSON.stringify({token:localStorage.getItem("token"),email:e.target.id}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"success"===e.saved&&document.getElementById(t).replaceWith("blocked")}))},n.state={users:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchUserList()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"User List"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Password"),r.a.createElement("th",null,"Last Active"),r.a.createElement("th",null,"Disable"))),r.a.createElement("tbody",null,this.state.users.map((function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.email),r.a.createElement("td",null,t.password),r.a.createElement("td",null,void 0===t.last_active?"No logins":new Date(t.last_active).toLocaleString()),r.a.createElement("td",null,t.disabled?"Blocked":r.a.createElement("button",{id:t.email,onClick:e.disableHandler},"Disable")))})))),r.a.createElement("p",{id:"errors",style:{display:"none"}},"Errors :"," "),r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"circular-loader",style:{position:"absolute",top:"45vh",left:"45vw"}}),r.a.createElement("p",{style:{position:"absolute",top:"60vh",left:"43vw"}},"Please Wait...")))}}]),a}(n.Component),j=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleChange=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,r,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,r=a.name,l=a.value,e.next=5,n.setState(Object(h.a)({},r,l));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleSubmit=function(e){e.preventDefault();var t=document.querySelector(".overlay");t.style.display="block",fetch("/api/add_user",{method:"POST",body:JSON.stringify(Object(p.a)({},n.state,{token:localStorage.getItem("token")})),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if("success"===e.saved){var a=document.getElementById("saved");a.innerHTML="User successfully created...",a.style.display="block"}else{var n=document.getElementById("errors");n.style.display="block",e.error&&(n.innerHTML+=e.error.msg),e.errors&&e.errors.map((function(e){n.innerHTML+="<p>"+e.msg+"<br/></p>"})),window.location.hash="errors",setTimeout((function(){n.style.display="none",n.innerHTML="Errors : "}),1e4)}t.style.display="none"}))},n.state={name:"",email:"",password:""},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,id:"login_form"},r.a.createElement("h2",{style:{gridColumn:"span 2"}},"Add User"),r.a.createElement("label",{htmlFor:"name"},"Name : "),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"email"},"Email : "),r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password : "),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("div",null),r.a.createElement("input",{type:"submit",value:"Save User"})),r.a.createElement("h2",{id:"saved",style:{display:"none"}}),r.a.createElement("p",{id:"errors"},"Errors : "),r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"circular-loader",style:{position:"absolute",top:"45vh",left:"45vw"}}),r.a.createElement("p",{style:{position:"absolute",top:"60vh",left:"43vw"}},"Verifying Credentials...")))}}]),a}(n.Component),k=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"admin"},r.a.createElement(E,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/admin/user_list",exact:!0,render:function(e){return r.a.createElement(O,e)}}),r.a.createElement(d.a,{path:"/admin/addUser",exact:!0,render:function(e){return r.a.createElement(j,e)}})))}}]),a}(n.Component),w=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).fetchUser=function(){fetch("/api/profile",{method:"POST",body:JSON.stringify({token:localStorage.getItem("token")}),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then(function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("unsuccessful"!==t.saved){e.next=5;break}alert("You are not logged in..."),n.props.history.push("/login"),e.next=7;break;case 5:return e.next=7,n.setState({name:t.name,email:t.email});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},n.state={name:"",email:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("div",{id:"login_form"},r.a.createElement("h2",{style:{gridColumn:"span 2"}},"Profile"),r.a.createElement("h2",null,"Name :"),r.a.createElement("h2",null,this.state.name),r.a.createElement("h2",null,"Email :"),r.a.createElement("h2",null,this.state.email)))}}]),a}(n.Component),S=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).loginNavHandler=function(e){n.setState({loggedin:e})},n.state={loggedin:!1},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(f,{loggedin:this.state.loggedin}),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0},r.a.createElement("h2",null,"Welcome To Website")),r.a.createElement(d.a,{path:"/login/",render:function(t){return r.a.createElement(v,Object.assign({},t,{loginNavHandler:e.loginNavHandler}))}}),r.a.createElement(d.a,{path:"/admin/",component:k}),r.a.createElement(d.a,{path:"/user/profile",component:w}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.3303cf82.chunk.js.map